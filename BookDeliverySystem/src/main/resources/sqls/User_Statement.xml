<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dowon.bds.model.mapper.UserDaoImpl">


<!-- 이메일체크 -->
<select id="checkEmail" resultType="java.lang.Integer">
SELECT COUNT(USER_EMAIL)
	FROM TB_USER
	WHERE USER_EMAIL= #{user_email}
</select>


<!-- 로그인 구현 -->
<select id="login" resultType="UserDto" parameterType="Map">
SELECT USER_SEQ,USER_EMAIL,USER_PHONE,USER_BIRTH,JOINDATE,USER_NAME,USER_AUTH,USER_GENDER
	FROM TB_USER
	WHERE USER_EMAIL = #{user_email} 
	AND USER_PASSWORD = #{user_password}
</select>

<!-- 일반 회원가입 -->
<insert id="nomalRegist" parameterType="UserDto">
INSERT INTO TB_USER
	(USER_SEQ,USER_EMAIL,USER_PASSWORD,
	USER_NAME,USER_PHONE,USER_BIRTH,
	USER_AUTH,USER_DELFLAG,JOINDATE,USER_GENDER)
	VALUES (SQ_USER.NEXTVAL,#{user_email},#{user_password},
			#{user_name},#{user_phone},#{user_birth},
			'U','N',SYSDATE,#{user_gender})
</insert>

<!-- 모든회원정보가져오기 -->
<select id="getAllUser" resultType="UserDto">
SELECT USER_SEQ,USER_EMAIL,USER_PHONE,USER_BIRTH,JOINDATE,USER_NAME,USER_GENDER
	FROM TB_USER
</select>

</mapper>
